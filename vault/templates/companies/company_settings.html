{% extends "base.html" %}

{% block content %}
<div class="company-container">
    <div class="company-header">
        <h1>{{ company.name if company else 'New Company' }} / Settings</h1>
    </div>

    <div class="company-navbar">
        {% if company.id %}
            <a href="{{ url_for('companies.company_files', company_id=company.id) }}">Files</a>
            <a href="{{ url_for('companies.company_users', company_id=company.id) }}">Users</a>    
            <a href="{{ url_for('companies.company_roles', company_id=company.id) }}">Roles</a>
            <a href="{{ url_for('companies.company_logs', company_id=company.id) }}">Activity Logs</a>
            <a href="{{ url_for('companies.company_settings', company_id=company.id) }}" class="active">Settings</a>
        {% else %}
            <span style="color: #6b7280;">Complete setup to enable tabs</span>
        {% endif %}
    </div>

    <div class="tab-content">
        <div class="settings-card">
            <form method="POST" enctype="multipart/form-data">
                {{ form.hidden_tag() }}
                <div class="form-group">
                    <label>Company Name</label>
                    {{ form.name(class="form-input", placeholder="Enter company name") }}
                </div>
                <div class="form-group">
                    <label>Company Password</label>
                    {{ form.password(class="form-input", placeholder="Update company password") }}
                </div>
                <div class="form-group">
                    <label>Update Logo</label>
                    {{ form.logo(class="form-file") }}
                </div>
                
                <div class="settings-footer">
                    <button type="submit" class="btn-primary">Save Changes</button>
                </div>
            </form>
            <div class="settings-footer">
                {% if company.logo and company.logo != 'logo.svg' %}
                <form action="{{ url_for('companies.remove_logo', company_id=company.id) }}" method="POST" class="remove-logo-form">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
                    <button type="submit" class="btn-secondary" onclick="return confirm('Are you sure you want to remove the company logo?')">Remove Logo</button>
                </form>
                {% endif %}
            </div>
            {% if company.id %}
            <div class="settings-footer">
                <form action="{{ url_for('companies.delete_company', company_id=company.id) }}" method="POST">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
                    <button type="submit" class="btn-danger" onclick="return confirmDeleteCompany()">Delete Company</button>
                </form>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/companies.js') }}"></script>
{% endblock %}